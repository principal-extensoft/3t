<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>workbench</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <script type="module" crossorigin>(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=e(r);fetch(r.href,n)}})();let I;async function W(){return new Promise((a,t)=>{const e=indexedDB.open("workbench_DB",1);e.onerror=()=>t(e.error),e.onsuccess=()=>{I=e.result,console.log("[DB] Database opened successfully"),a(I)},e.onupgradeneeded=s=>{I=s.target.result,console.log("[DB] Creating object stores...")}})}function j(a){if(!a||a.trim().length===0)return"text";const t=a.trim();return H(t)?"json":U(t)?"xml":q(t)?"html":J(t)?"css":X(t)?"javascript":V(a)?"csv":z(a)?"tsv":Z(t)?"yaml":G(t)?"sql":"text"}function H(a){try{return typeof JSON.parse(a)=="object"}catch{return!1}}function U(a){if(a.startsWith("<?xml"))return!0;const e=/<([a-zA-Z][a-zA-Z0-9\-_:.]*)[^>]*>[\s\S]*<\/\1>/.test(a),r=/<(html|head|body|div|span|p|a|img|script|style|link|meta)/i.test(a);return e&&!r}function q(a){return[/<!DOCTYPE\s+html/i,/<html[^>]*>/i,/<head[^>]*>/i,/<body[^>]*>/i,/<(div|span|p|a|img|script|style|link|meta|title|h1|h2|h3|h4|h5|h6)[^>]*>/i].some(e=>e.test(a))}function J(a){const t=/[.#]?[\w-]+\s*\{/.test(a),e=/[\w-]+\s*:\s*[^;]+;/.test(a),s=/@(media|import|keyframes|font-face|charset|supports|page)/.test(a),r=/\/\*[\s\S]*?\*\//.test(a);return t&&e||s||r&&e}function X(a){const t=[/\b(function|const|let|var|class|import|export|require|module\.exports)\s+/,/=>\s*[{(]/,/\b(async|await)\b/,/console\.(log|error|warn|info)/,/document\.(getElementById|querySelector|addEventListener)/,/window\./,/\$\(/];let e=0;for(const s of t)s.test(a)&&e++;return e>=2}function V(a){const t=a.split(`
`).filter(r=>r.trim());if(t.length<2)return!1;const e=(t[0].match(/,/g)||[]).length;if(e===0)return!1;let s=0;for(let r=1;r<Math.min(t.length,10);r++){const n=(t[r].match(/,/g)||[]).length;Math.abs(n-e)<=1&&s++}return s/Math.min(t.length-1,9)>.5}function z(a){const t=a.split(`
`).filter(r=>r.trim());if(t.length<2)return!1;const e=(t[0].match(/\t/g)||[]).length;if(e===0)return!1;let s=0;for(let r=1;r<Math.min(t.length,10);r++){const n=(t[r].match(/\t/g)||[]).length;Math.abs(n-e)<=1&&s++}return s/Math.min(t.length-1,9)>.5}function Z(a){const t=[/^---\s*$/m,/^\s*[\w-]+:\s+/m,/^\s*-\s+[\w-]+/m];return a.trim().startsWith("{")||a.trim().startsWith("[")||a.trim().startsWith("<")?!1:t.some(e=>e.test(a))}function G(a){const t=["SELECT","INSERT","UPDATE","DELETE","CREATE","DROP","ALTER","FROM","WHERE","JOIN","INNER","LEFT","RIGHT","OUTER","GROUP BY","ORDER BY","HAVING","LIMIT","OFFSET","TABLE","DATABASE","INDEX","VIEW","PROCEDURE"],e=a.toUpperCase();let s=0;for(const r of t)e.includes(r)&&s++;return s>=2}function O(a,t){if(t==="csv"||t==="tsv")return!0;if(t==="json")try{const e=typeof a=="string"?JSON.parse(a):a;if(Array.isArray(e)&&e.length>0){const s=e[0];if(typeof s=="object"&&!Array.isArray(s))return Object.values(s).every(r=>typeof r!="object"||r===null)}if(typeof e=="object"&&!Array.isArray(e))return Object.values(e).every(s=>typeof s!="object"||s===null)}catch{return!1}return t==="xml"?Y(a)<=3:!1}function Y(a){const e=new DOMParser().parseFromString(a,"text/xml");function s(r){if(!r.children||r.children.length===0)return 1;let n=0;for(const o of r.children)n=Math.max(n,s(o));return n+1}return s(e.documentElement)}function _(a,t={}){const{indent:e=2,minify:s=!1}=t;try{const r=JSON.parse(a);if(s)return JSON.stringify(r);const n=e==="tab"?"	":" ".repeat(parseInt(e)),o=JSON.stringify(r,null,n);return et(o)}catch(r){throw new Error(`JSON Parse Error: ${r.message}`)}}function K(a){try{const t=JSON.parse(a);if(Array.isArray(t)&&t.length>0)return Q(t);if(typeof t=="object"&&t!==null)return tt(t);throw new Error("Data is not suitable for table conversion")}catch(t){throw new Error(`Table Conversion Error: ${t.message}`)}}function Q(a){if(a.length===0)return"<p>Empty array</p>";const t=new Set;a.forEach(r=>{typeof r=="object"&&r!==null&&Object.keys(r).forEach(n=>t.add(n))});const e=Array.from(t);let s='<table class="table table-striped table-bordered table-hover sortable-table">';return s+="<thead><tr>",e.forEach((r,n)=>{s+=`<th class="sortable" data-column="${n}">${x(r)}</th>`}),s+="</tr></thead><tbody>",a.forEach(r=>{s+="<tr>",e.forEach(n=>{const o=r[n];s+=`<td>${x(D(o))}</td>`}),s+="</tr>"}),s+="</tbody></table>",s}function tt(a){let t='<table class="table table-striped table-bordered table-hover sortable-table">';return t+='<thead><tr><th class="sortable" data-column="0">Key</th><th class="sortable" data-column="1">Value</th></tr></thead><tbody>',Object.entries(a).forEach(([e,s])=>{t+="<tr>",t+=`<td><strong>${x(e)}</strong></td>`,t+=`<td>${x(D(s))}</td>`,t+="</tr>"}),t+="</tbody></table>",t}function D(a){return a===null?"null":a===void 0?"undefined":typeof a=="object"?JSON.stringify(a):String(a)}function et(a){return a=a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),a.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,t=>{let e="number";return/^"/.test(t)?/:$/.test(t)?e="key":e="string":/true|false/.test(t)?e="boolean":/null/.test(t)&&(e="null"),`<span class="${e}">${t}</span>`})}function x(a){const t=document.createElement("div");return t.textContent=a,t.innerHTML}function st(a,t={}){const{indent:e=2,selfClosing:s=!0}=t;try{const n=new DOMParser().parseFromString(a,"text/xml"),o=n.querySelector("parsererror");if(o)throw new Error("Invalid XML: "+o.textContent);const i=e==="tab"?"	":" ".repeat(parseInt(e)),c=k(n.documentElement,0,i,s);return ot(c)}catch(r){throw new Error(`XML Parse Error: ${r.message}`)}}function k(a,t,e,s){const r=e.repeat(t);let n="";if(a.nodeType===Node.ELEMENT_NODE){const o=a.tagName,i=Array.from(a.attributes).map(u=>` ${u.name}="${u.value}"`).join("");n+=r+"<"+o+i;const c=a.childNodes.length>0,l=a.childNodes.length===1&&a.childNodes[0].nodeType===Node.TEXT_NODE;if(!c&&s)n+=` />
`;else if(l)n+=">"+N(a.childNodes[0].textContent)+"</"+o+`>
`;else{n+=`>
`;for(const u of a.childNodes)if(u.nodeType===Node.ELEMENT_NODE)n+=k(u,t+1,e,s);else if(u.nodeType===Node.TEXT_NODE){const p=u.textContent.trim();p&&(n+=e.repeat(t+1)+N(p)+`
`)}else u.nodeType===Node.CDATA_SECTION_NODE?n+=e.repeat(t+1)+"<![CDATA["+u.textContent+`]]>
`:u.nodeType===Node.COMMENT_NODE&&(n+=e.repeat(t+1)+"\x3C!--"+u.textContent+`-->
`);n+=r+"</"+o+`>
`}}return n}function nt(a){try{const e=new DOMParser().parseFromString(a,"text/xml");if(e.querySelector("parsererror"))throw new Error("Invalid XML");const r=e.documentElement,n=Array.from(r.children);if(n.length>0){const o=n[0].tagName;if(n.every(c=>c.tagName===o))return rt(n)}return at(r)}catch(t){throw new Error(`XML Table Conversion Error: ${t.message}`)}}function rt(a){const t=new Set;a.slice(0,10).forEach(r=>{Array.from(r.children).forEach(n=>{t.add(n.tagName)}),Array.from(r.attributes).forEach(n=>{t.add("@"+n.name)})});const e=Array.from(t);let s='<table class="table table-striped table-bordered table-hover sortable-table">';return s+="<thead><tr>",e.forEach((r,n)=>{s+=`<th class="sortable" data-column="${n}">${T(r)}</th>`}),s+="</tr></thead><tbody>",a.forEach(r=>{s+="<tr>",e.forEach(n=>{let o="";if(n.startsWith("@")){const i=n.substring(1);o=r.getAttribute(i)||""}else{const i=r.querySelector(n);o=i?i.textContent:""}s+=`<td>${T(o)}</td>`}),s+="</tr>"}),s+="</tbody></table>",s}function at(a){let t='<table class="table table-striped table-bordered table-hover sortable-table">';return t+='<thead><tr><th class="sortable" data-column="0">Property</th><th class="sortable" data-column="1">Value</th></tr></thead><tbody>',Array.from(a.attributes).forEach(e=>{t+="<tr>",t+=`<td><strong>@${T(e.name)}</strong></td>`,t+=`<td>${T(e.value)}</td>`,t+="</tr>"}),Array.from(a.children).forEach(e=>{t+="<tr>",t+=`<td><strong>${T(e.tagName)}</strong></td>`,t+=`<td>${T(e.textContent)}</td>`,t+="</tr>"}),t+="</tbody></table>",t}function ot(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/(&lt;\/?)([\w:-]+)/g,'$1<span class="tag">$2</span>').replace(/([\w:-]+)=/g,'<span class="attr-name">$1</span>=').replace(/="([^"]*)"/g,'="<span class="attr-value">$1</span>"')}function N(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function T(a){const t=document.createElement("div");return t.textContent=a,t.innerHTML}function lt(a,t={}){const{indent:e=2}=t;try{const s=e==="tab"?"	":" ".repeat(parseInt(e)),r=it(a,s);return ct(r)}catch(s){throw new Error(`HTML Format Error: ${s.message}`)}}function it(a,t){let e="",s=0;const r=a.match(/<[^>]+>|[^<]+/g)||[],n=new Set(["a","abbr","acronym","b","bdo","big","br","button","cite","code","dfn","em","i","img","input","kbd","label","map","object","output","q","samp","script","select","small","span","strong","sub","sup","textarea","time","tt","var"]),o=new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"]);let i=!1;for(let c=0;c<r.length;c++){const l=r[c].trim();if(l)if(l.startsWith("</")){const u=l.match(/<\/(\w+)>/)?.[1]?.toLowerCase();u&&!n.has(u)&&(s--,i||(e+=`
`+t.repeat(Math.max(0,s))),i=!1),e+=l}else if(l.startsWith("<")){const p=l.match(/<(\w+)/)?.[1]?.toLowerCase();if(p){const d=o.has(p)||l.endsWith("/>"),f=n.has(p);!f&&!i&&(e+=`
`+t.repeat(s)),e+=l,!d&&!f?(s++,i=!1):f&&(i=!0)}else e+=`
`+t.repeat(s)+l}else l.trim()&&(i||(e+=`
`+t.repeat(s)),e+=l,i=!0)}return e.trim()}function ct(a){let t=a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");const e=[];let s=0;for(;s<t.length;)if(t.substr(s,4)==="&lt;"){const r=t.indexOf("&gt;",s);if(r===-1){e.push(t.substr(s));break}const n=t.substring(s+4,r),o=n.startsWith("/"),i=o?"&lt;/":"&lt;",c=n.match(o?/^\/?([\w:-]+)/:/^([\w:-]+)/);if(c){const l=c[1],u=n.substring(c[0].length);if(e.push(i),e.push('<span class="tag">'+l+"</span>"),u){const p=ut(u);e.push(p)}}else e.push(i+n);e.push("&gt;"),s=r+4}else e.push(t[s]),s++;return e.join("")}function ut(a){let t="",e=0;for(;e<a.length;){if(/\s/.test(a[e])){t+=a[e],e++;continue}const s=a.substring(e).match(/^([\w:-]+)=/);if(s){const r=s[1];if(t+='<span class="attr-name">'+r+"</span>=",e+=s[0].length,a[e]==='"'){const n=a.indexOf('"',e+1);if(n!==-1){const o=a.substring(e+1,n);t+='"<span class="attr-value">'+o+'</span>"',e=n+1;continue}}else if(a[e]==="'"){const n=a.indexOf("'",e+1);if(n!==-1){const o=a.substring(e+1,n);t+=`'<span class="attr-value">`+o+"</span>'",e=n+1;continue}}}t+=a[e],e++}return t}function pt(a,t={}){const{indent:e=2,minify:s=!1,singleLineRules:r=!1,showDuplicates:n=!1,mergeDuplicates:o=!1}=t;try{if(r)return S(dt(a,n,o));if(s)return S(ht(a));{const i=e==="tab"?"	":" ".repeat(parseInt(e));return S(Et(a,i))}}catch(i){throw new Error(`CSS Format Error: ${i.message}`)}}function ht(a){return a.replace(/\/\*[\s\S]*?\*\//g,"").replace(/\s+/g," ").replace(/\s*([{}:;,>+~])\s*/g,"$1").replace(/;}/g,"}").trim()}function dt(a,t=!1,e=!1){let s=a.replace(/\/\*[\s\S]*?\*\//g,"");const r=[];let n="",o=0;for(let i=0;i<s.length;i++){const c=s[i];if(c==="{")o++,n+=c;else if(c==="}"){if(o--,n+=c,o===0){const l=n.trim();if(l){const u=gt(l);r.push(u)}n=""}}else n+=c}return e?ft(r):(r.sort(),t?mt(r):r.join(`
`))}function ft(a){const t=new Map;for(const n of a){const o=n.indexOf("{"),i=n.lastIndexOf("}");if(o===-1||i===-1)continue;const c=n.substring(0,o).trim(),l=n.substring(o+1,i).trim(),u=new Map,p=l.split(";").map(f=>f.trim()).filter(f=>f);for(const f of p){const h=f.indexOf(":");if(h===-1)continue;const g=f.substring(0,h).trim(),E=f.substring(h+1).trim();u.set(g,E)}t.has(c)||t.set(c,new Map);const d=t.get(c);for(const[f,h]of u)d.set(f,h)}const e=[],s={originalCount:a.length,mergedCount:0,duplicateProperties:0};for(const[n,o]of t.entries()){const c=Array.from(o.entries()).sort((l,u)=>l[0].localeCompare(u[0])).map(([l,u])=>`${l}: ${u}`).join("; ");e.push(`${n} { ${c} }`)}return s.mergedCount=e.length,s.duplicateProperties=a.length-e.length,e.sort(),["/* ===== MERGED & DEDUPLICATED CSS ===== */",`/* Original rules: ${s.originalCount} */`,`/* Merged to: ${s.mergedCount} unique selectors */`,`/* Removed: ${s.duplicateProperties} duplicate/override rules */`,"/* Properties are sorted alphabetically within each rule */",""].join(`
`)+e.join(`
`)}function mt(a){const t=new Map,e=new Map;for(const l of a){const u=l.substring(0,l.indexOf("{")).trim();e.has(u)||(e.set(u,[]),t.set(u,0)),e.get(u).push(l),t.set(u,t.get(u)+1)}const s=new Map;for(const l of t.keys()){const u=l.split(/[:\[>+~\s]/)[0];s.has(u)||s.set(u,[]),s.get(u).push(l)}const r=[],n=new Set;let o=!1;for(const[l,u]of t.entries())if(u>1){o||(r.push("/* ===== EXACT DUPLICATES ===== */"),o=!0),r.push(`
/* ${l} - appears ${u} times */`);for(const p of e.get(l))r.push(p);n.add(l)}let i=!1;for(const[l,u]of s.entries())if(u.length>1){const p=u.filter(d=>!n.has(d));if(p.length>1){i||(r.push(`

/* ===== RELATED SELECTORS (same base) ===== */`),i=!0),r.push(`
/* Base: ${l} - ${p.length} variants */`);for(const d of p)for(const f of e.get(d))r.push(f)}}const c=["/* ===== DUPLICATE ANALYSIS ===== */",`/* Total rules: ${a.length} */`,`/* Exact duplicates: ${Array.from(t.values()).filter(l=>l>1).length} selectors */`,`/* Related groups: ${Array.from(s.values()).filter(l=>l.length>1).length} bases */`,""];return r.length===0?c.join(`
`)+`
/* No duplicates or related selectors found! */`:c.join(`
`)+r.join(`
`)}function gt(a){const t=a.indexOf("{"),e=a.lastIndexOf("}");if(t===-1||e===-1)return a;const s=a.substring(0,t).trim().replace(/\s+/g," "),n=a.substring(t+1,e).trim().replace(/\s*;\s*/g,"; ").replace(/\s*:\s*/g,": ").replace(/\s+/g," ").trim(),o=n.endsWith(";")?n.slice(0,-1):n;return`${s} { ${o} }`}function Et(a,t){const s=a.replace(/\/\*[\s\S]*?\*\//g,o=>`
${o}
`).replace(/\s+/g," ").replace(/\s*{\s*/g,` {
`).replace(/\s*}\s*/g,`
}
`).replace(/\s*;\s*/g,`;
`).replace(/\s*,\s*/g,", ").trim().split(`
`);let r=0;const n=[];for(let o of s)o=o.trim(),o&&(o.startsWith("}")&&(r=Math.max(0,r-1)),o.startsWith("/*"),n.push(t.repeat(r)+o),o.endsWith("{")&&r++);return n.join(`
`)}function S(a){let t=a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return t=t.replace(/(\/\*[\s\S]*?\*\/)/g,'<span class="comment">$1</span>'),t=t.replace(/^([^{}/]+)(\s*{)/gm,'<span class="selector">$1</span>$2'),t=t.replace(/([a-z-]+)(\s*):/gi,'<span class="property">$1</span>$2:'),t=t.replace(/:(\s*)([^;{}]+)(;)/g,':<span class="value">$2</span>$3'),t=t.replace(/([{}])/g,'<span class="brace">$1</span>'),t}function bt(a,t={}){const{indent:e=2,minify:s=!1}=t;try{if(s)return A(yt(a));{const r=e==="tab"?"	":" ".repeat(parseInt(e));return A(Tt(a,r))}}catch(r){throw new Error(`JavaScript Format Error: ${r.message}`)}}function yt(a){return a.replace(/(?<!:)\/\/.*$/gm,"").replace(/\/\*[\s\S]*?\*\//g,"").replace(/\s+/g," ").replace(/\s*([{};,:\[\]()=<>!&|+\-*/%])\s*/g,"$1").replace(/\b(if|else|for|while|do|switch|case|return|function|const|let|var|class|new|typeof|instanceof|in|of)\(/g,"$1 (").trim()}function Tt(a,t){let e="",s=0,r=!1,n="",o=!1,i=!1,c=!1,l="";for(let u=0;u<a.length;u++){const p=a[u],d=a[u+1],f=a[u-1];if(!r&&!o&&p==="/"&&d==="*"){c=!0,l+=p;continue}if(c&&p==="*"&&d==="/"){l+=p,u++,l+=a[u],c=!1;continue}if(c){l+=p;continue}if(!r&&!o&&p==="/"&&d==="/"){i=!0,l+=p;continue}if(i&&p===`
`){i=!1,l+=p,e+=l,l="";continue}if(i){l+=p;continue}if((p==='"'||p==="'"||p==="`")&&f!=="\\"){r?p===n&&(r=!1,n=""):(r=!0,n=p),l+=p;continue}if(r){l+=p;continue}if(p==="/"&&!r&&/[=,(:[!&|?+\-*%/]/.test(f)){o=!0,l+=p;continue}if(o&&p==="/"&&f!=="\\"){o=!1,l+=p;continue}if(o){l+=p;continue}if(/\s/.test(p)){l&&!/\s$/.test(l)&&(l+=" ");continue}if(p==="{"){l=l.trim(),l?e+=t.repeat(s)+l+` {
`:e+=t.repeat(s)+`{
`,l="",s++;continue}if(p==="}"){s=Math.max(0,s-1),l.trim()&&(e+=t.repeat(s+1)+l.trim()+`
`,l=""),e+=t.repeat(s)+"}",d===";"||d===","||d===")"?e+="":e+=`
`;continue}if(p===";"){l=l.trim(),l&&(e+=t.repeat(s)+l+`;
`,l="");continue}l+=p}return l.trim()&&(e+=t.repeat(s)+l.trim()),e.trim()}function A(a){let t=a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return t=t.replace(/(\/\/.*$)/gm,'<span class="comment">$1</span>').replace(/(\/\*[\s\S]*?\*\/)/g,'<span class="comment">$1</span>'),["async","await","break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","finally","for","function","if","import","in","instanceof","let","new","of","return","static","super","switch","this","throw","try","typeof","var","void","while","with","yield"].forEach(s=>{const r=new RegExp(`\\b(${s})\\b`,"g");t=t.replace(r,'<span class="keyword">$1</span>')}),t=t.replace(/("(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*'|`(?:[^`\\]|\\.)*`)/g,'<span class="string">$1</span>'),t=t.replace(/\b(\d+\.?\d*)\b/g,'<span class="number">$1</span>'),t=t.replace(/\b(function)\s+([a-zA-Z_$][a-zA-Z0-9_$]*)/g,'<span class="keyword">$1</span> <span class="function-name">$2</span>'),t=t.replace(/\b(true|false)\b/g,'<span class="boolean">$1</span>'),t=t.replace(/\b(null|undefined)\b/g,'<span class="null">$1</span>'),t}function xt(a,t={}){const{outputFormat:e="markdown"}=t;try{return e==="html"?St(a):It(a)}catch(s){throw new Error(`Markdown Format Error: ${s.message}`)}}function It(a){let t=a.split(`
`),e=[],s=!1,r=null;for(let n=0;n<t.length;n++){let o=t[n],i=o.trim();if(!i){r&&(e.push(...C(r)),r=null),e.push("");continue}const c=i.match(/\|/g),l=i.match(/\t/g);if(c&&c.length>=1||l&&l.length>=2){s&&(e.push("```"),s=!1),r||(r=[]);const u=c?i.split("|").map(p=>p.trim()).filter(p=>p):i.split("	").map(p=>p.trim());r.push(u);continue}else r&&(e.push(...C(r)),r=null);if(o.startsWith("    ")||o.startsWith("	")){s||(e.push("```"),s=!0),e.push(o.substring(o.match(/^\s*/)[0].length));continue}else s&&(e.push("```"),s=!1);if(i===i.toUpperCase()&&i.length>3&&/^[A-Z\s]+$/.test(i)){e.push(`## ${i}`);continue}if(/^\d+\.\s+/.test(i)){e.push(i);continue}if(/^[-•*]\s+/.test(i)){e.push(i.replace(/^[-•*]\s+/,"- "));continue}if(n>0&&i.length<100&&/^[A-Z]/.test(i)&&!i.endsWith(":")){const u=t[n-1].trim();if(u.endsWith(":")||/^[-•*]\s+/.test(u)||/^\d+\.\s+/.test(u)){e.push(`- ${i}`);continue}}e.push(i)}return s&&e.push("```"),r&&e.push(...C(r)),Ct(e.join(`
`))}function C(a){if(!a||a.length===0)return[];const t=Math.max(...a.map(o=>o.length)),e=a.map(o=>{for(;o.length<t;)o.push("");return o}),s=[];for(let o=0;o<t;o++){const i=Math.max(...e.map(c=>c[o].length));s.push(Math.max(i,3))}const r=[],n=e[0];r.push("| "+n.map((o,i)=>o.padEnd(s[i])).join(" | ")+" |"),r.push("| "+s.map(o=>"-".repeat(o)).join(" | ")+" |");for(let o=1;o<e.length;o++){const i=e[o];r.push("| "+i.map((c,l)=>c.padEnd(s[l])).join(" | ")+" |")}return r}function St(a){let t=a.split(`
`),e=[],s=!1,r=null,n=!1,o=null;for(let i=0;i<t.length;i++){let l=t[i].trim();if(!l){o&&(e.push(w(o)),o=null),n&&(e.push("</p>"),n=!1),s&&(e.push(r==="ol"?"</ol>":"</ul>"),s=!1,r=null);continue}const u=l.match(/\|/g),p=l.match(/\t/g);if(u&&u.length>=1||p&&p.length>=2){n&&(e.push("</p>"),n=!1),s&&(e.push(r==="ol"?"</ol>":"</ul>"),s=!1,r=null),o||(o=[]);const d=u?l.split("|").map(f=>f.trim()).filter(f=>f):l.split("	").map(f=>f.trim());o.push(d);continue}else o&&(e.push(w(o)),o=null);if(l===l.toUpperCase()&&l.length>3&&/^[A-Z\s]+$/.test(l)){n&&(e.push("</p>"),n=!1),e.push(`<h2>${m(l)}</h2>`);continue}if(l.endsWith(":")&&l.length<100){n&&(e.push("</p>"),n=!1),e.push(`<h3>${m(l.slice(0,-1))}</h3>`);continue}if(/^\d+\.\s+(.+)/.test(l)){const d=l.match(/^\d+\.\s+(.+)/);n&&(e.push("</p>"),n=!1),(!s||r!=="ol")&&(s&&e.push(r==="ol"?"</ol>":"</ul>"),e.push("<ol>"),s=!0,r="ol"),e.push(`  <li>${m(d[1])}</li>`);continue}if(/^[-•*]\s+(.+)/.test(l)){const d=l.match(/^[-•*]\s+(.+)/);n&&(e.push("</p>"),n=!1),(!s||r!=="ul")&&(s&&e.push(r==="ol"?"</ol>":"</ul>"),e.push("<ul>"),s=!0,r="ul"),e.push(`  <li>${m(d[1])}</li>`);continue}if(i>0&&l.length<100&&/^[A-Z]/.test(l)&&(t[i-1].trim().endsWith(":")||s&&r==="ul")){(!s||r!=="ul")&&(s&&e.push(r==="ol"?"</ol>":"</ul>"),n&&(e.push("</p>"),n=!1),e.push("<ul>"),s=!0,r="ul"),e.push(`  <li>${m(l)}</li>`);continue}s&&(e.push(r==="ol"?"</ol>":"</ul>"),s=!1,r=null),n?e.push(" "):(e.push("<p>"),n=!0),e.push(m(l))}return n&&e.push("</p>"),s&&e.push(r==="ol"?"</ol>":"</ul>"),o&&e.push(w(o)),e.join(`
`)}function w(a){if(!a||a.length===0)return"";let t=`<table class="table table-bordered table-striped">
`;t+=`  <thead>
    <tr>
`;for(const e of a[0])t+=`      <th>${m(e)}</th>
`;if(t+=`    </tr>
  </thead>
`,a.length>1){t+=`  <tbody>
`;for(let e=1;e<a.length;e++){t+=`    <tr>
`;for(const s of a[e])t+=`      <td>${m(s)}</td>
`;t+=`    </tr>
`}t+=`  </tbody>
`}return t+="</table>",t}function m(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function Ct(a){let t=m(a);return t=t.replace(/```([\s\S]*?)```/g,'<span class="md-code-block">```$1```</span>'),t=t.replace(/^(#{1,6})\s+(.+)$/gm,'<span class="md-heading">$1</span> <span class="md-heading-text">$2</span>'),t=t.replace(/^(\s*[-*+]|\d+\.)\s+/gm,'<span class="md-list-marker">$1</span> '),t=t.replace(/\*\*(.+?)\*\*/g,'<span class="md-bold">**$1**</span>'),t=t.replace(/\*(.+?)\*/g,'<span class="md-italic">*$1*</span>'),t=t.replace(/`(.+?)`/g,'<span class="md-code">`$1`</span>'),t}function wt(a,t={}){const{outputFormat:e="text",merge:s=!1,showDuplicates:r=!1,smartParse:n=!1,indentSize:o=2}=t;try{let i;n?i=[Lt(a)]:i=Nt(a);let c;if(s||!n&&i.length>1?c=F(i):c=i[0],r)return At(i);switch(e){case"json":return Bt(c);case"xml":return Rt(c);case"markdown":return Dt(c);case"html":return kt(c);case"text":default:return $t(c,o)}}catch(i){throw new Error(`Hierarchical List Error: ${i.message}`)}}function Lt(a){const t=a.split(`
`);let e=0,s=0;for(const l of t){if(!l.trim())continue;s++,/^\s+/.test(l)&&e++}if(s>0&&e/s>.7)return M(a);const r={text:"Organized Notes",children:[],level:-1};let n=null,o=null,i=[],c=[r];for(let l=0;l<t.length;l++){const u=t[l],p=u.trim();if(!p||/^[-=]{3,}$/.test(p)){if(i.length>0&&n){const h={text:i.join(" "),children:[],level:o?2:1,type:"text"};o?o.children.push(h):n.children.push(h),i=[]}continue}const d=u.match(/^(\s+)/);if(d&&d[1].length>0){if(i.length>0&&n){const v={text:i.join(" "),children:[],level:o?2:1,type:"text"};o?o.children.push(v):n.children.push(v),i=[]}const h=d[1],g=h[0]==="	"?"	":" ",E=g==="	"?1:2,y=g==="	"?h.split("	").length-1:Math.floor(h.length/E),b={text:p,children:[],level:y,type:"item"};for(;c.length>1&&c[c.length-1].level>=y;)c.pop();c[c.length-1].children.push(b),c.push(b);continue}if(vt(p,t,l)){if(i.length>0&&n){const h={text:i.join(" "),children:[],level:o?2:1,type:"text"};o?o.children.push(h):n.children.push(h),i=[]}c=[r],n&&!(/^[A-Z\s]+$/.test(p)&&p.length<50)?(o={text:p,children:[],level:1,type:"subsection"},n.children.push(o),c=[r,n,o]):(n={text:p,children:[],level:0,type:"section"},o=null,r.children.push(n),c=[r,n])}else i.push(p)}if(i.length>0&&n){const l={text:i.join(" "),children:[],level:o?2:1,type:"text"};o?o.children.push(l):n.children.push(l)}return Ot(r)}function vt(a,t,e){if(!a||a.length<5)return!1;if(/^[A-Z\s&-]+$/.test(a)&&a.length<50||/^[A-Z][a-z]+(\s+[A-Z][a-z]+){0,4}$/.test(a))return!0;const s=t[e+1];return s&&(s.match(/^\s+/)||!s.trim())?a.length<80&&!a.endsWith(","):!1}function Ot(a){const t=new Map;for(const e of a.children){const s=e.text.toLowerCase().trim();t.has(s)?t.get(s).children.push(...e.children):t.set(s,e)}return a.children=Array.from(t.values()),a.children.sort((e,s)=>e.text.localeCompare(s.text)),a}function Nt(a){return a.split(/\n\s*\n/).filter(e=>e.trim()).map(e=>M(e))}function M(a){const t=a.split(`
`).filter(o=>o.trim());let e=null,s=0;for(const o of t){const i=o.match(/^(\s+)/);if(i){const c=i[1];c[0]==="	"?(e="	",s=1):(e=" ",(s===0||c.length<s)&&(s=c.length));break}}s===0&&(e=" ",s=2);const r={text:"",children:[],level:-1},n=[r];for(const o of t){const i=o.trim();if(!i)continue;const c=o.match(/^(\s*)/),l=c?c[1]:"",u=e==="	"?l.split("	").length-1:Math.floor(l.length/s),p={text:i,children:[],level:u};for(;n.length>0&&n[n.length-1].level>=u;)n.pop();n.length>0&&n[n.length-1].children.push(p),n.push(p)}return r}function F(a){if(a.length===0)return{text:"",children:[],level:-1};if(a.length===1)return a[0];const t={text:"Merged Lists",children:[],level:-1,sources:[]},e=[];a.forEach((r,n)=>{r.children.forEach(o=>{e.push({...o,sourceTree:n})})});const s=new Map;for(const r of e){const n=r.text.toLowerCase();s.has(n)||s.set(n,[]),s.get(n).push(r)}for(const[r,n]of s.entries())if(n.length===1)t.children.push(n[0]);else{const o={text:n[0].text,children:[],level:n[0].level,duplicateCount:n.length,sources:n.map(l=>l.sourceTree)},i=n.map(l=>({text:"",children:l.children,level:-1})),c=F(i);o.children=c.children,t.children.push(o)}return t.children.sort((r,n)=>r.text.localeCompare(n.text)),t}function At(a){const t=[];function e(c,l=[],u=0){c.text&&t.push({text:c.text,path:[...l,c.text],treeIndex:u});for(const p of c.children)e(p,[...l,c.text].filter(d=>d),u)}a.forEach((c,l)=>e(c,[],l));const s=new Map,r=new Map;for(const c of t){const l=c.text.toLowerCase();s.set(l,(s.get(l)||0)+1);const u=c.path.map(p=>p.toLowerCase()).join(" > ");r.has(u)||r.set(u,[]),r.get(u).push(c)}const n=[];n.push("/* ===== HIERARCHICAL LIST ANALYSIS ===== */"),n.push(`/* Total lists analyzed: ${a.length} */`),n.push(`/* Total nodes: ${t.length} */`),n.push(""),n.push("/* ===== EXACT PATH DUPLICATES ===== */");let o=!1;for(const[c,l]of r.entries())l.length>1&&(o=!0,n.push(`/* ${c} - appears ${l.length} times in list(s): ${[...new Set(l.map(u=>u.treeIndex+1))].join(", ")} */`));o||n.push("/* No exact path duplicates found */"),n.push(""),n.push("/* ===== TEXT DUPLICATES (different paths) ===== */");let i=!1;for(const[c,l]of s.entries())if(l>1){const u=t.filter(d=>d.text.toLowerCase()===c).map(d=>d.path.join(" > ")),p=[...new Set(u)];p.length>1&&(i=!0,n.push(`/* "${c}" appears in ${p.length} different locations: */`),p.forEach(d=>n.push(`/*   - ${d} */`)))}return i||n.push("/* No text duplicates in different paths */"),n.join(`
`)}function $t(a,t=2){const e=[];function s(r,n=0){if(r.text){let i=" ".repeat(n*t)+r.text;r.duplicateCount>1&&(i+=` [merged from ${r.duplicateCount} sources]`),e.push(i)}for(const o of r.children)s(o,n+1)}return s(a),e.join(`
`)}function Bt(a){function t(s){const r={text:s.text,children:s.children.map(t)};return s.duplicateCount&&(r.duplicateCount=s.duplicateCount),s.sources&&(r.sources=s.sources),r}const e=t(a);return JSON.stringify(e,null,2).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Rt(a){const t=['<?xml version="1.0" encoding="UTF-8"?>'];function e(s,r=0){if(s.text){const n="  ".repeat(r),o=s.text.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");s.children.length===0?t.push(`${n}<item text="${o}" />`):(t.push(`${n}<item text="${o}">`),s.children.forEach(i=>e(i,r+1)),t.push(`${n}</item>`))}else t.push("<list>"),s.children.forEach(n=>e(n,r+1)),t.push("</list>")}return e(a),t.join(`
`).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Dt(a){const t=[];function e(s,r=0){if(s.text){let o="  ".repeat(r)+"- "+s.text;s.duplicateCount>1&&(o+=` *(merged from ${s.duplicateCount} sources)*`),t.push(o)}for(const n of s.children)e(n,r+1)}return e(a),t.join(`
`).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function kt(a){const t=[];function e(s,r=0){if(s.text){const n=s.text.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");s.children.length===0?t.push(`<li>${n}</li>`):(t.push(`<li>${n}`),t.push("<ul>"),s.children.forEach(o=>e(o,r+1)),t.push("</ul>"),t.push("</li>"))}else t.push('<ul class="hierarchical-list">'),s.children.forEach(n=>e(n,r+1)),t.push("</ul>")}return e(a),t.join(`
`).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function $(a,t={}){const{sortOrder:e="asc",ignoreCase:s=!0,removeDuplicates:r=!1}=t;try{let n=a.split(`
`);if(n=n.map(c=>c.trim()).filter(c=>c),r)if(s){const c=new Set;n=n.filter(l=>{const u=l.toLowerCase();return c.has(u)?!1:(c.add(u),!0)})}else n=[...new Set(n)];return n.sort((c,l)=>{let u=c,p=l;return s&&(u=c.toLowerCase(),p=l.toLowerCase()),e==="desc"?p.localeCompare(u):u.localeCompare(p)}),([`\x3C!-- Sorted ${e==="asc"?"A-Z":"Z-A"} -->`,`\x3C!-- Total lines: ${n.length} -->`,`\x3C!-- Ignore case: ${s} -->`,`\x3C!-- Duplicates removed: ${r} -->`,""].join(`
`)+n.join(`
`)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}catch(n){throw new Error(`Sort Error: ${n.message}`)}}function Mt(a,t={}){const{delimiter:e=","}=t;try{const s=L(a,e);return P(s)}catch(s){throw new Error(`CSV Format Error: ${s.message}`)}}function Ft(a){try{const t=L(a,"	");return P(t)}catch(t){throw new Error(`TSV Format Error: ${t.message}`)}}function B(a,t=","){try{const e=L(a,t);if(e.length===0)return"[]";const s=e[0],r=[];for(let n=1;n<e.length;n++){const o={};for(let i=0;i<s.length;i++)o[s[i]]=e[n][i]||"";r.push(o)}return JSON.stringify(r,null,2)}catch(e){throw new Error(`CSV to JSON Error: ${e.message}`)}}function L(a,t){const e=[],s=a.split(`
`);for(const r of s){if(!r.trim())continue;const n=[];let o="",i=!1;for(let c=0;c<r.length;c++){const l=r[c],u=r[c+1];l==='"'?i&&u==='"'?(o+='"',c++):i=!i:l===t&&!i?(n.push(o.trim()),o=""):o+=l}n.push(o.trim()),e.push(n)}return e}function P(a){if(a.length===0)return"<p>No data to display</p>";let t='<table class="table table-striped table-bordered table-hover sortable-table">';t+="<thead><tr>",a[0].forEach((e,s)=>{t+=`<th class="sortable" data-column="${s}">${R(e)}</th>`}),t+="</tr></thead>",t+="<tbody>";for(let e=1;e<a.length;e++)t+="<tr>",a[e].forEach(s=>{t+=`<td>${R(s)}</td>`}),t+="</tr>";return t+="</tbody></table>",t}function R(a){const t=document.createElement("div");return t.textContent=String(a),t.innerHTML}function Pt(a,t={}){const{indent:e=2}=t;try{const s=a.split(`
`);let r="",n=0;const o=e==="tab"?"	":" ".repeat(parseInt(e));for(const i of s){const c=i.trim();if(!c||c.startsWith("#")){r+=i+`
`;continue}if(c.startsWith("- "))r+=o.repeat(n)+c+`
`;else if(c.includes(":")){const[l,...u]=c.split(":"),p=u.join(":").trim();r+=o.repeat(n)+l.trim()+":",p&&(r+=" "+p),r+=`
`,(!p||p===""||p==="|"||p===">")&&n++}else r+=o.repeat(n)+c+`
`;i.match(/^\S/)&&n>0&&(n=0)}return Ht(r)}catch(s){throw new Error(`YAML Format Error: ${s.message}`)}}function Wt(a,t={}){const{indent:e=2,uppercase:s=!0}=t;try{const r=e==="tab"?"	":" ".repeat(parseInt(e));let n=a.replace(/\s+/g," ").trim();const o=["SELECT","FROM","WHERE","INNER JOIN","LEFT JOIN","RIGHT JOIN","FULL OUTER JOIN","CROSS JOIN","JOIN","GROUP BY","HAVING","ORDER BY","LIMIT","OFFSET","UNION ALL","UNION","INTERSECT","EXCEPT","INSERT INTO","VALUES","UPDATE","SET","DELETE FROM","CREATE TABLE","CREATE VIEW","CREATE INDEX","ALTER TABLE","DROP TABLE","DROP VIEW","DROP INDEX","WITH"];for(const d of o.sort((f,h)=>h.length-f.length)){const f=new RegExp(`\\b${d.replace(/\s+/g,"\\s+")}\\b`,"gi");n=n.replace(f,`
${d}`)}n=n.replace(/\b(AND|OR)\b/gi,`
$1`),n=n.replace(/\(\s*SELECT/gi,`(
SELECT`),n=n.replace(/\)\s*(FROM|WHERE|GROUP|ORDER|UNION|INTERSECT|EXCEPT|,)/gi,`
)$1`),n=n.replace(/,\s*(?=[a-zA-Z_@\[])/g,`,
`),n=n.replace(/\n\s*\n/g,`
`);const i=n.split(`
`).map(d=>d.trim()).filter(d=>d);let c="",l=0,u=!1,p=0;for(let d=0;d<i.length;d++){const f=i[d],h=f.toUpperCase(),g=d>0?i[d-1].toUpperCase():"",E=(f.match(/\(/g)||[]).length,y=(f.match(/\)/g)||[]).length;(h.startsWith(")")||h.startsWith("FROM")&&g.includes("SELECT")||h.startsWith("WHERE")&&!g.startsWith("WHERE")||(h.startsWith("GROUP BY")||h.startsWith("HAVING")||h.startsWith("ORDER BY"))&&l>0||h.startsWith("UNION")||h.startsWith("INTERSECT")||h.startsWith("EXCEPT"))&&(l=Math.max(0,l-1)),h.includes("CASE")&&(u=!0),h.startsWith("WHEN"),h.startsWith("ELSE"),h.startsWith("END")&&u&&(u=!1);let b=l;h.startsWith("AND")||h.startsWith("OR")?b=l:h.startsWith("WHEN")||h.startsWith("ELSE")?b=l+(u?1:0):h.startsWith(")")?b=Math.max(0,l):f.startsWith(",")&&(b=l),c+=r.repeat(b)+f+`
`,h.startsWith("SELECT")||h.startsWith("INSERT INTO")||h.startsWith("UPDATE")||h.startsWith("DELETE FROM")||h.startsWith("CREATE")||h.startsWith("ALTER")?l++:h.startsWith("FROM")?l=1:h.startsWith("WHERE")&&!g.startsWith("WHERE")?l=2:(h.startsWith("INNER")||h.startsWith("LEFT")||h.startsWith("RIGHT")||h.startsWith("FULL")||h.startsWith("CROSS")||h.startsWith("JOIN"))&&h.includes("JOIN")?l=1:h.startsWith("ON")&&(l=2),E>y?l+=E-y:y>E&&(l=Math.max(0,l-(y-E)))}return s&&(c=jt(c)),Ut(c.trim())}catch(r){throw new Error(`SQL Format Error: ${r.message}`)}}function jt(a){const t=["SELECT","DISTINCT","TOP","FROM","WHERE","JOIN","INNER","LEFT","RIGHT","FULL","OUTER","CROSS","ON","AND","OR","NOT","IN","EXISTS","BETWEEN","LIKE","IS","NULL","AS","GROUP","BY","HAVING","ORDER","ASC","DESC","LIMIT","OFFSET","UNION","ALL","INTERSECT","EXCEPT","INSERT","INTO","VALUES","UPDATE","SET","DELETE","CREATE","ALTER","DROP","TABLE","VIEW","INDEX","DATABASE","PRIMARY","KEY","FOREIGN","REFERENCES","CONSTRAINT","CHECK","DEFAULT","UNIQUE","CASE","WHEN","THEN","ELSE","END","COUNT","SUM","AVG","MIN","MAX","CAST","CONVERT","COALESCE","NULLIF","ISNULL","WITH","RECURSIVE","OVER","PARTITION","ROW_NUMBER","RANK","DENSE_RANK","NTILE"];let e=a;for(const s of t){const r=new RegExp(`\\b${s}\\b`,"gi");e=e.replace(r,s.toUpperCase())}return e}function Ht(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/^(\s*)([\w-]+):/gm,'$1<span class="key">$2</span>:').replace(/:\s*([^\n]+)/g,': <span class="string">$1</span>').replace(/#.*/g,'<span class="comment">$&</span>')}function Ut(a){const t=["SELECT","FROM","WHERE","JOIN","INNER","LEFT","RIGHT","OUTER","ON","GROUP","BY","HAVING","ORDER","LIMIT","OFFSET","AS","INSERT","INTO","VALUES","UPDATE","SET","DELETE","CREATE","ALTER","DROP","TABLE","INDEX","VIEW","DATABASE","AND","OR","NOT","IN","EXISTS","BETWEEN","LIKE","IS","NULL","UNION","ALL","INTERSECT","EXCEPT","DISTINCT","COUNT","SUM","AVG","MIN","MAX","PRIMARY","KEY","FOREIGN","REFERENCES","CASE","WHEN","THEN","ELSE","END","CAST","CONVERT","COALESCE","OVER","PARTITION","ROW_NUMBER","RANK","DENSE_RANK","TOP","WITH","RECURSIVE","CROSS","FULL","ASC","DESC"];let e=a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");e=e.replace(/'([^']*)'/g,`<span class="string">'$1'</span>`),e=e.replace(/"([^"]*)"/g,'<span class="string">"$1"</span>'),e=e.replace(/\b(\d+\.?\d*)\b/g,'<span class="number">$1</span>');for(const s of t){const r=new RegExp(`\\b(${s})\\b`,"gi");e=e.replace(r,n=>`<span class="keyword">${n.toUpperCase()}</span>`)}return e=e.replace(/--[^\n]*/g,'<span class="comment">$&</span>'),e=e.replace(/\/\*[\s\S]*?\*\//g,'<span class="comment">$&</span>'),e}function qt(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}class Jt{constructor(){this.inputArea=document.getElementById("inputArea"),this.outputCode=document.getElementById("outputCode"),this.outputArea=document.getElementById("outputArea"),this.tableOutput=document.getElementById("tableOutput"),this.formatSelector=document.getElementById("formatSelector"),this.dropZone=document.getElementById("dropZone"),this.fileInput=document.getElementById("fileInput"),this.formatBtn=document.getElementById("formatBtn"),this.clearInputBtn=document.getElementById("clearInputBtn"),this.copyBtn=document.getElementById("copyBtn"),this.downloadBtn=document.getElementById("downloadBtn"),this.statsInfo=document.getElementById("statsInfo"),this.exportJsonBtn=document.getElementById("export-json-btn"),this.exportXmlBtn=document.getElementById("export-xml-btn"),this.exportCsvBtn=document.getElementById("export-csv-btn"),this.inputPanel=document.getElementById("inputPanel"),this.outputPanel=document.getElementById("outputPanel"),this.mainContent=document.querySelector(".main-content"),this.collapseInputBtn=document.getElementById("collapseInputBtn"),this.collapseOutputBtn=document.getElementById("collapseOutputBtn"),this.expandBothBtn=document.getElementById("expandBothBtn"),this.currentFormat="auto",this.currentInput="",this.currentOutput="",this.inputCollapsed=!1,this.outputCollapsed=!1,this.tableData=null,this.initEventListeners()}initEventListeners(){this.fileInput.addEventListener("change",t=>this.handleFileSelect(t)),this.dropZone.addEventListener("click",()=>this.fileInput.click()),this.dropZone.addEventListener("dragover",t=>this.handleDragOver(t)),this.dropZone.addEventListener("dragleave",t=>this.handleDragLeave(t)),this.dropZone.addEventListener("drop",t=>this.handleDrop(t)),this.inputArea.addEventListener("input",()=>this.handleInputChange()),this.formatSelector.addEventListener("change",()=>this.handleFormatChange()),this.formatBtn.addEventListener("click",()=>this.handleFormat()),this.clearInputBtn.addEventListener("click",()=>this.handleClear()),this.copyBtn.addEventListener("click",()=>this.handleCopy()),this.downloadBtn.addEventListener("click",()=>this.handleDownload()),this.collapseInputBtn.addEventListener("click",()=>this.toggleInputPanel()),this.collapseOutputBtn.addEventListener("click",()=>this.toggleOutputPanel()),this.expandBothBtn.addEventListener("click",()=>this.expandBothPanels()),this.exportJsonBtn.addEventListener("click",()=>this.exportTableAsJSON()),this.exportXmlBtn.addEventListener("click",()=>this.exportTableAsXML()),this.exportCsvBtn.addEventListener("click",()=>this.exportTableAsCSV())}handleDragOver(t){t.preventDefault(),t.stopPropagation(),this.dropZone.classList.add("drag-over")}handleDragLeave(t){t.preventDefault(),t.stopPropagation(),this.dropZone.classList.remove("drag-over")}async handleDrop(t){t.preventDefault(),t.stopPropagation(),this.dropZone.classList.remove("drag-over");const e=t.dataTransfer.files;e.length>0&&await this.loadFile(e[0])}async handleFileSelect(t){const e=t.target.files;e.length>0&&await this.loadFile(e[0])}async loadFile(t){const e=parseInt(document.getElementById("maxFileSize").value)*1024*1024;if(t.size>e){this.showToast(`File too large. Max size: ${e/1024/1024}MB`,"danger");return}try{const s=await t.text();this.inputArea.value=s,this.currentInput=s,this.handleInputChange(),this.showToast(`Loaded ${t.name}`,"success"),this.updateStats()}catch(s){this.showToast(`Error loading file: ${s.message}`,"danger")}}handleInputChange(){const t=this.inputArea.value;if(this.currentInput=t,this.formatSelector.value==="auto"){const e=j(t);this.currentFormat=e,this.updateFormatOptions(e)}else this.currentFormat=this.formatSelector.value,this.updateFormatOptions(this.formatSelector.value);this.updateStats()}handleFormatChange(){const t=this.formatSelector.value;t==="auto"?this.handleInputChange():(this.currentFormat=t,this.updateFormatOptions(t))}updateFormatOptions(t){document.getElementById("jsonOptions").style.display="none",document.getElementById("xmlOptions").style.display="none",document.getElementById("cssOptions").style.display="none",document.getElementById("jsOptions").style.display="none",document.getElementById("markdownOptions").style.display="none",document.getElementById("hierarchicalOptions").style.display="none",document.getElementById("sortOptions").style.display="none",document.getElementById("csvOptions").style.display="none",t==="json"?document.getElementById("jsonOptions").style.display="block":t==="xml"?document.getElementById("xmlOptions").style.display="block":t==="css"?document.getElementById("cssOptions").style.display="block":t==="javascript"?document.getElementById("jsOptions").style.display="block":t==="markdown"?document.getElementById("markdownOptions").style.display="block":t==="hierarchical"?document.getElementById("hierarchicalOptions").style.display="block":t==="sort"||t==="text"?document.getElementById("sortOptions").style.display="block":(t==="csv"||t==="tsv")&&(document.getElementById("csvOptions").style.display="block")}async handleFormat(){if(!this.currentInput.trim()){this.showToast("Please enter or load some content first","warning");return}try{const t=this.getFormatOptions();let e="",s="",r=!1;switch(this.currentFormat){case"json":e=_(this.currentInput,t),t.showTable&&O(this.currentInput,"json")&&(s=K(this.currentInput),r=!0);break;case"xml":e=st(this.currentInput,t),t.showTable&&O(this.currentInput,"xml")&&(s=nt(this.currentInput),r=!0);break;case"html":e=lt(this.currentInput,t);break;case"css":e=pt(this.currentInput,t);break;case"javascript":e=bt(this.currentInput,t);break;case"markdown":e=xt(this.currentInput,t);break;case"hierarchical":e=wt(this.currentInput,t);break;case"sort":e=$(this.currentInput,t);break;case"csv":t.convertToJson?(e=B(this.currentInput,","),this.outputCode.className=""):t.showTable&&(s=Mt(this.currentInput),r=!0,e="See table view");break;case"tsv":t.convertToJson?(e=B(this.currentInput,"	"),this.outputCode.className=""):t.showTable&&(s=Ft(this.currentInput),r=!0,e="See table view");break;case"yaml":e=Pt(this.currentInput,t);break;case"sql":e=Wt(this.currentInput,t);break;case"text":default:t.sortOrder||t.removeDuplicates?e=$(this.currentInput,t):e=qt(this.currentInput);break}this.currentOutput=e,this.outputCode.innerHTML=e,r?(this.tableOutput.innerHTML=s,document.querySelector("#table-tab").parentElement.style.display="block",new bootstrap.Tab(document.querySelector("#table-tab")).show(),this.initTableSorting(),this.makeTableEditable(),this.enableExportButtons()):(document.querySelector("#table-tab").parentElement.style.display="none",this.disableExportButtons()),this.copyBtn.disabled=!1,this.downloadBtn.disabled=!1,this.showToast(`Formatted as ${this.currentFormat.toUpperCase()}`,"success"),this.updateStats()}catch(t){this.showToast(t.message,"danger"),console.error("Format error:",t)}}getFormatOptions(){const e={indent:document.getElementById("indentSize").value};if(this.currentFormat==="json"){const s=document.querySelector('input[name="jsonFormat"]:checked').value;e.minify=s==="minify",e.showTable=document.getElementById("jsonToTable").checked}else if(this.currentFormat==="xml")e.selfClosing=document.getElementById("xmlSelfClosing").checked,e.showTable=document.getElementById("xmlToTable").checked;else if(this.currentFormat==="css"){const s=document.querySelector('input[name="cssFormat"]:checked').value;e.minify=s==="minify",e.singleLineRules=s==="singleline",e.showDuplicates=document.getElementById("cssShowDuplicates").checked,e.mergeDuplicates=document.getElementById("cssMergeDuplicates").checked}else if(this.currentFormat==="javascript"){const s=document.querySelector('input[name="jsFormat"]:checked').value;e.minify=s==="minify"}else if(this.currentFormat==="markdown"){const s=document.querySelector('input[name="markdownFormat"]:checked').value;e.outputFormat=s}else if(this.currentFormat==="hierarchical"){const s=document.querySelector('input[name="hierarchicalFormat"]:checked').value;e.outputFormat=s,e.smartParse=document.getElementById("hierSmartParse").checked,e.merge=document.getElementById("hierMerge").checked,e.showDuplicates=document.getElementById("hierShowDuplicates").checked}else if(this.currentFormat==="sort"){const s=document.querySelector('input[name="sortOrder"]:checked').value;e.sortOrder=s,e.ignoreCase=document.getElementById("sortIgnoreCase").checked,e.removeDuplicates=document.getElementById("sortRemoveDuplicates").checked}else if(this.currentFormat==="text"){const s=document.querySelector('input[name="sortOrder"]:checked')?.value;e.sortOrder=s,e.ignoreCase=document.getElementById("sortIgnoreCase").checked,e.removeDuplicates=document.getElementById("sortRemoveDuplicates").checked}else(this.currentFormat==="csv"||this.currentFormat==="tsv")&&(e.convertToJson=document.getElementById("csvToJson").checked,e.showTable=document.getElementById("csvToTable").checked);return e}handleClear(){this.inputArea.value="",this.outputCode.innerHTML="",this.tableOutput.innerHTML="",this.currentInput="",this.currentOutput="",this.copyBtn.disabled=!0,this.downloadBtn.disabled=!0,document.querySelector("#table-tab").parentElement.style.display="none",this.updateStats(),this.showToast("Cleared","info")}async handleCopy(){try{const t=document.createElement("div");t.innerHTML=this.currentOutput;const e=t.textContent||t.innerText;await navigator.clipboard.writeText(e),this.showToast("Copied to clipboard","success")}catch{this.showToast("Failed to copy","danger")}}handleDownload(){const t=document.createElement("div");t.innerHTML=this.currentOutput;const e=t.textContent||t.innerText,n=`formatted.${{json:"json",xml:"xml",html:"html",css:"css",javascript:"js",markdown:"md",csv:"csv",tsv:"tsv",yaml:"yaml",sql:"sql",text:"txt"}[this.currentFormat]||"txt"}`;this.downloadFileWithPicker(e,n)}updateStats(){const t=this.currentInput.length;this.currentOutput.length;const e=this.currentInput.split(`
`).length;t===0?this.statsInfo.textContent="Ready":this.statsInfo.textContent=`Input: ${t} chars, ${e} lines | Format: ${this.currentFormat.toUpperCase()}`}showToast(t,e="info"){const s=`
      <div class="toast" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header bg-${e} text-white">
          <strong class="me-auto">Workbench</strong>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast"></button>
        </div>
        <div class="toast-body">${t}</div>
      </div>
    `,r=document.querySelector(".toast-container");r.insertAdjacentHTML("beforeend",s);const n=r.lastElementChild;new bootstrap.Toast(n,{delay:3e3}).show(),n.addEventListener("hidden.bs.toast",()=>n.remove())}toggleInputPanel(){this.outputCollapsed&&this.toggleOutputPanel(),this.inputCollapsed=!this.inputCollapsed,this.inputCollapsed?(this.inputPanel.classList.add("collapsed"),this.mainContent.classList.add("input-collapsed"),this.collapseInputBtn.innerHTML='<i class="fas fa-chevron-right"></i>',this.collapseInputBtn.title="Expand Input Panel",this.expandBothBtn.style.display="block"):(this.inputPanel.classList.remove("collapsed"),this.mainContent.classList.remove("input-collapsed"),this.collapseInputBtn.innerHTML='<i class="fas fa-chevron-left"></i>',this.collapseInputBtn.title="Collapse Input Panel",this.expandBothBtn.style.display="none")}toggleOutputPanel(){this.inputCollapsed&&this.toggleInputPanel(),this.outputCollapsed=!this.outputCollapsed,this.outputCollapsed?(this.outputPanel.classList.add("collapsed"),this.mainContent.classList.add("output-collapsed"),this.collapseOutputBtn.innerHTML='<i class="fas fa-chevron-left"></i>',this.collapseOutputBtn.title="Expand Output Panel",this.expandBothBtn.style.display="block"):(this.outputPanel.classList.remove("collapsed"),this.mainContent.classList.remove("output-collapsed"),this.collapseOutputBtn.innerHTML='<i class="fas fa-chevron-right"></i>',this.collapseOutputBtn.title="Collapse Output Panel",this.expandBothBtn.style.display="none")}expandBothPanels(){this.inputCollapsed?this.toggleInputPanel():this.outputCollapsed&&this.toggleOutputPanel()}initTableSorting(){const t=this.tableOutput.querySelector(".sortable-table");if(!t)return;const e=t.querySelectorAll("th.sortable");e.forEach(s=>{s.addEventListener("click",()=>{const r=parseInt(s.dataset.column),n=s.classList.contains("sort-asc")?"asc":s.classList.contains("sort-desc")?"desc":"none";e.forEach(i=>{i.classList.remove("sort-asc","sort-desc")});let o="asc";n==="asc"&&(o="desc"),s.classList.add(`sort-${o}`),this.sortTable(t,r,o)})})}sortTable(t,e,s){const r=t.querySelector("tbody"),n=Array.from(r.querySelectorAll("tr"));n.sort((o,i)=>{const c=o.querySelectorAll("td")[e],l=i.querySelectorAll("td")[e];if(!c||!l)return 0;const u=c.textContent.trim(),p=l.textContent.trim(),d=parseFloat(u),f=parseFloat(p);let h=0;return!isNaN(d)&&!isNaN(f)?h=d-f:h=u.localeCompare(p,void 0,{numeric:!0,sensitivity:"base"}),s==="asc"?h:-h}),r.innerHTML="",n.forEach(o=>r.appendChild(o))}makeTableEditable(){const t=this.tableOutput.querySelector("table");if(!t)return;t.querySelectorAll("thead th").forEach(r=>{r.setAttribute("contenteditable","true"),r.setAttribute("spellcheck","false")}),t.querySelectorAll("tbody td").forEach(r=>{r.setAttribute("contenteditable","true"),r.setAttribute("spellcheck","false")}),this.currentTable=t}enableExportButtons(){this.exportJsonBtn.disabled=!1,this.exportXmlBtn.disabled=!1,this.exportCsvBtn.disabled=!1}disableExportButtons(){this.exportJsonBtn.disabled=!0,this.exportXmlBtn.disabled=!0,this.exportCsvBtn.disabled=!0}getTableData(){if(!this.currentTable)return null;const t=[],e=[];return this.currentTable.querySelectorAll("thead th").forEach(n=>{const o=n.textContent.trim();t.push(o.replace(/[\u25B2\u25BC]/g,"").trim())}),this.currentTable.querySelectorAll("tbody tr").forEach(n=>{const o=[];n.querySelectorAll("td").forEach(c=>{o.push(c.textContent.trim())}),e.push(o)}),{headers:t,data:e}}exportTableAsJSON(){const t=this.getTableData();if(!t)return;const{headers:e,data:s}=t,r=s.map(o=>{const i={};return e.forEach((c,l)=>{i[c]=o[l]}),i}),n=JSON.stringify(r,null,2);this.downloadFileWithPicker(n,"table-export.json")}exportTableAsXML(){const t=this.getTableData();if(!t)return;const{headers:e,data:s}=t;let r=`<?xml version="1.0" encoding="UTF-8"?>
<data>
`;s.forEach(n=>{r+=`  <row>
`,e.forEach((o,i)=>{const c=o.replace(/[^a-zA-Z0-9_]/g,"_"),l=this.escapeXml(n[i]);r+=`    <${c}>${l}</${c}>
`}),r+=`  </row>
`}),r+="</data>",this.downloadFileWithPicker(r,"table-export.xml")}exportTableAsCSV(){const t=this.getTableData();if(!t)return;const{headers:e,data:s}=t,r=o=>o.includes(",")||o.includes('"')||o.includes(`
`)?`"${o.replace(/"/g,'""')}"`:o;let n=e.map(r).join(",")+`
`;s.forEach(o=>{n+=o.map(r).join(",")+`
`}),this.downloadFileWithPicker(n,"table-export.csv")}escapeXml(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}async downloadFileWithPicker(t,e){if("showSaveFilePicker"in window)try{const s=e.split(".").pop(),n={json:"application/json",xml:"application/xml",html:"text/html",csv:"text/csv",tsv:"text/tab-separated-values",yaml:"text/yaml",yml:"text/yaml",sql:"application/sql",txt:"text/plain"}[s]||"text/plain",i=await(await window.showSaveFilePicker({suggestedName:e,types:[{description:`${s.toUpperCase()} File`,accept:{[n]:[`.${s}`]}}]})).createWritable();await i.write(t),await i.close(),this.showToast(`Saved as ${e}`,"success")}catch(s){s.name==="AbortError"?this.showToast("Save cancelled","info"):(console.error("Error saving file:",s),this.showToast("Error saving file","danger"),this.downloadFileFallback(t,e))}else this.downloadFileFallback(t,e)}downloadFileFallback(t,e){const s=new Blob([t],{type:"text/plain"}),r=URL.createObjectURL(s),n=document.createElement("a");n.href=r,n.download=e,n.click(),URL.revokeObjectURL(r),this.showToast(`Downloaded as ${e}`,"success")}downloadFile(t,e,s){const r=new Blob([t],{type:s}),n=URL.createObjectURL(r),o=document.createElement("a");o.href=n,o.download=e,o.click(),URL.revokeObjectURL(n)}}console.log("[App] Developer Workbench Initializing...");let Xt;async function Vt(){try{await W(),console.log("[App] Database initialized"),Xt=new Jt,console.log("[App] UI Controller initialized"),console.log("[App] ✓ Workbench ready!")}catch(a){console.error("[App] Initialization failed:",a)}}document.addEventListener("DOMContentLoaded",Vt);</script>
  <style rel="stylesheet" crossorigin>*{margin:0;padding:0;box-sizing:border-box}body{font-family:Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;line-height:1.6;color:#e0e0e0;background:#0d1117;overflow-x:hidden}#app{min-height:100vh;height:100vh;display:flex;flex-direction:column;overflow:hidden}:root{--bg-primary: #0d1117;--bg-secondary: #161b22;--bg-tertiary: #1c2128;--bg-hover: #21262d;--border-color: #30363d;--text-primary: #e6edf3;--text-secondary: #8b949e;--accent-blue: #58a6ff;--accent-green: #3fb950;--accent-yellow: #d29922;--accent-red: #f85149;--accent-purple: #bc8cff;--shadow: rgba(0, 0, 0, .3)}.app-header{background:var(--bg-secondary);border-bottom:2px solid var(--border-color);padding:1.5rem 2rem;text-align:center}.app-header h1{color:var(--accent-blue);font-size:2rem;font-weight:600;margin:0}.app-header h1 i{margin-right:.5rem;color:var(--accent-green)}.app-header .subtitle{color:var(--text-secondary);margin:.5rem 0 0;font-size:.95rem}.main-content{display:grid;grid-template-columns:1fr auto 1fr;gap:1.5rem;padding:1rem;flex:1;min-height:0;max-height:100%;transition:grid-template-columns .3s ease}.main-content.input-collapsed{grid-template-columns:0fr auto 1fr}.main-content.output-collapsed{grid-template-columns:1fr auto 0fr}.panel{background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:8px;display:flex;flex-direction:column;min-height:0;overflow:hidden;transition:all .3s ease;position:relative}.panel.collapsed{min-width:0!important;width:0;opacity:0;pointer-events:none}.panel.collapsed *{overflow:hidden}.input-panel,.output-panel{min-width:400px}.panel-header{background:var(--bg-tertiary);border-bottom:1px solid var(--border-color);padding:1rem 1.5rem;display:flex;justify-content:space-between;align-items:center}.panel-header h3{color:var(--text-primary);font-size:1.1rem;font-weight:600;margin:0}.panel-header h3 i{margin-right:.5rem;color:var(--accent-blue)}.header-actions{display:flex;gap:.5rem}.drop-zone{background:var(--bg-tertiary);border:2px dashed var(--border-color);border-radius:6px;margin:1rem;padding:2rem;text-align:center;transition:all .3s ease;cursor:pointer;overflow:hidden}.drop-zone:hover{border-color:var(--accent-blue);background:var(--bg-hover)}.drop-zone.drag-over{border-color:var(--accent-green);background:#3fb9501a}.drop-zone i{font-size:3rem;color:var(--accent-blue);display:block;margin-bottom:1rem}.drop-zone p{color:var(--text-primary);font-size:1.1rem;margin:.5rem 0}.drop-zone small{color:var(--text-secondary);font-size:.9rem}.code-area{background:var(--bg-primary);border:1px solid var(--border-color);color:var(--text-primary);font-family:Consolas,Monaco,Courier New,monospace;font-size:.9rem;line-height:1.5;padding:1rem;margin:1rem;flex:1;resize:none;border-radius:4px;min-height:300px;overflow:auto}.code-area:focus{outline:none;border-color:var(--accent-blue)}.code-area::placeholder{color:var(--text-secondary)}#outputArea{margin:0;padding:1rem;overflow:auto;border:none;border-radius:0;flex:1}#outputCode{color:var(--text-primary)}.format-info{display:flex;align-items:center;gap:1rem;padding:0 1rem 1rem}.format-info label{color:var(--text-secondary);font-size:.9rem;white-space:nowrap}.options-panel{background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:8px;width:280px;display:flex;flex-direction:column;transition:width .3s ease}.main-content.input-collapsed .options-panel,.main-content.output-collapsed .options-panel{width:320px}.options-content{padding:1.5rem;overflow-y:auto}.option-group{margin-bottom:1.5rem}.option-group label{color:var(--text-primary);font-size:.9rem;font-weight:500;display:block;margin-bottom:.5rem}.option-group .form-check{margin-bottom:.5rem}.option-group .form-check-label{color:var(--text-secondary);font-size:.85rem;font-weight:400}.form-select,.form-control{background:var(--bg-tertiary);border:1px solid var(--border-color);color:var(--text-primary)}.form-select:focus,.form-control:focus{background:var(--bg-tertiary);border-color:var(--accent-blue);color:var(--text-primary);box-shadow:0 0 0 .2rem #58a6ff40}.form-select option{background:var(--bg-tertiary);color:var(--text-primary)}.form-check-input{background-color:var(--bg-tertiary);border:1px solid var(--border-color)}.form-check-input:checked{background-color:var(--accent-blue);border-color:var(--accent-blue)}.form-check-input:focus{border-color:var(--accent-blue);box-shadow:0 0 0 .2rem #58a6ff40}.btn{font-size:.875rem;font-weight:500;border-radius:6px;transition:all .2s ease}.btn-primary{background:var(--accent-blue);border-color:var(--accent-blue);color:#000}.btn-primary:hover{background:#4a94e6;border-color:#4a94e6;transform:translateY(-1px)}.btn-outline-primary{border-color:var(--accent-blue);color:var(--accent-blue)}.btn-outline-primary:hover{background:var(--accent-blue);color:#000}.btn-outline-success{border-color:var(--accent-green);color:var(--accent-green)}.btn-outline-success:hover{background:var(--accent-green);color:#000}.btn-outline-info{border-color:var(--accent-blue);color:var(--accent-blue)}.btn-outline-info:hover{background:var(--accent-blue);color:#000}.btn-outline-danger{border-color:var(--accent-red);color:var(--accent-red)}.btn-outline-danger:hover{background:var(--accent-red);color:#fff}.btn:disabled{opacity:.5;cursor:not-allowed}.nav-tabs{background:var(--bg-tertiary);border-bottom:1px solid var(--border-color);padding:0 1rem}.nav-tabs .nav-link{color:var(--text-secondary);border:none;border-bottom:2px solid transparent;padding:.75rem 1rem}.nav-tabs .nav-link:hover{color:var(--text-primary);border-bottom-color:var(--accent-blue)}.nav-tabs .nav-link.active{color:var(--accent-blue);background:transparent;border-bottom-color:var(--accent-blue)}.tab-content{flex:1;display:flex;flex-direction:column;min-height:0;overflow:hidden}.tab-pane{flex:1;display:none;overflow:hidden;min-height:0}.tab-pane.active{display:flex;flex-direction:column;overflow:hidden;min-height:0}.table-actions{display:flex;gap:.5rem;padding:.75rem;background:var(--panel-bg);border-bottom:1px solid var(--border-color)}.table-container{flex:1;min-height:0;overflow-y:auto;overflow-x:auto;position:relative}.table-container .table{margin:0;width:100%;display:table}.table{color:var(--text-primary);border-color:var(--border-color);--bs-table-bg: transparent;--bs-table-striped-bg: rgba(255, 255, 255, .02);--bs-table-hover-bg: rgba(255, 255, 255, .04)}.table thead th{background:var(--bg-tertiary);border-color:var(--border-color);color:var(--accent-blue);font-weight:600;position:sticky;top:0;z-index:100;cursor:pointer;user-select:none;white-space:nowrap;padding-right:2rem}.table thead th:hover{background:var(--bg-hover)}.table tbody td{border-color:var(--border-color);font-family:Consolas,Monaco,Courier New,monospace;font-size:.85rem;background:#1e212899;color:#e0e0e0}.table tbody tr:nth-child(2n) td{background:#282c3499}.table tbody tr:hover td{background:#32363ecc}.table th[contenteditable=true],.table td[contenteditable=true]{outline:1px solid transparent;transition:outline-color .2s,background-color .2s}.table th[contenteditable=true]:focus,.table td[contenteditable=true]:focus{outline-color:var(--primary-color);background:#0d6efd40!important;color:#f0f0f0}.table th[contenteditable=true]:hover:not(:focus),.table td[contenteditable=true]:hover:not(:focus){outline-color:var(--border-color);cursor:text}.table thead th.sortable:after{content:"";font-family:"Font Awesome 6 Free";font-weight:900;position:absolute;right:.5rem;opacity:.3;font-size:.8em}.table thead th.sort-asc:after{content:"";opacity:1;color:var(--accent-green)}.table thead th.sort-desc:after{content:"";opacity:1;color:var(--accent-green)}.table-striped>tbody>tr:nth-of-type(odd)>*{--bs-table-accent-bg: transparent}.footer-stats{background:var(--bg-secondary);border-top:1px solid var(--border-color);padding:.75rem 2rem;color:var(--text-secondary);font-size:.85rem;text-align:center}.toast{background:var(--bg-secondary);border:1px solid var(--border-color);color:var(--text-primary)}.toast-header{border-bottom:1px solid var(--border-color)}.toast-body{color:var(--text-primary)}.syntax-json .key{color:var(--accent-blue)}.syntax-json .string{color:var(--accent-green)}.syntax-json .number{color:var(--accent-purple)}.syntax-json .boolean{color:var(--accent-yellow)}.syntax-json .null{color:var(--accent-red)}.syntax-xml .tag{color:var(--accent-blue)}.syntax-xml .attr-name{color:var(--accent-green)}.syntax-xml .attr-value{color:var(--accent-yellow)}.syntax-html .tag{color:var(--accent-blue)}.syntax-html .attr-name{color:var(--accent-green)}.syntax-html .attr-value{color:var(--accent-yellow)}.syntax-css .comment{color:#6a9955;font-style:italic}.syntax-css .selector{color:var(--accent-yellow)}.syntax-css .property{color:var(--accent-blue)}.syntax-css .value{color:var(--accent-green)}.syntax-css .brace{color:var(--text-primary);font-weight:700}.syntax-js .comment{color:#6a9955;font-style:italic}.syntax-js .keyword{color:var(--accent-purple)}.syntax-js .string{color:var(--accent-green)}.syntax-js .number{color:var(--accent-yellow)}.syntax-js .function-name{color:var(--accent-blue);font-weight:700}.syntax-js .boolean{color:var(--accent-purple)}.syntax-js .null{color:var(--accent-red)}.syntax-md .md-heading{color:var(--accent-purple);font-weight:700}.syntax-md .md-heading-text{color:var(--accent-blue);font-weight:700}.syntax-md .md-list-marker{color:var(--accent-yellow)}.syntax-md .md-bold{color:var(--accent-green);font-weight:700}.syntax-md .md-italic{color:var(--accent-green);font-style:italic}.syntax-md .md-code{color:var(--accent-yellow);background:#ffffff0d;padding:.1em .3em;border-radius:3px}.syntax-md .md-code-block{color:var(--accent-green)}.syntax-sql .keyword{color:var(--accent-purple)}.syntax-sql .function{color:var(--accent-blue)}.syntax-sql .string{color:var(--accent-green)}.tag{color:var(--accent-blue)}.attr-name{color:var(--accent-green)}.attr-value{color:var(--accent-yellow)}.comment{color:#6a9955;font-style:italic}.selector{color:var(--accent-yellow)}.property{color:var(--accent-blue)}.value{color:var(--accent-green)}.brace{color:var(--text-primary);font-weight:700}.keyword{color:var(--accent-purple)}.string{color:var(--accent-green)}.number{color:var(--accent-yellow)}.function-name{color:var(--accent-blue);font-weight:700}.boolean{color:var(--accent-purple)}.null{color:var(--accent-red)}.md-heading{color:var(--accent-purple);font-weight:700}.md-heading-text{color:var(--accent-blue);font-weight:700}.md-list-marker{color:var(--accent-yellow)}.md-bold{color:var(--accent-green);font-weight:700}.md-italic{color:var(--accent-green);font-style:italic}.md-code{color:var(--accent-yellow);background:#ffffff0d;padding:.1em .3em;border-radius:3px}.md-code-block{color:var(--accent-green)}::-webkit-scrollbar{width:10px;height:10px}::-webkit-scrollbar-track{background:var(--bg-primary)}::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:5px}::-webkit-scrollbar-thumb:hover{background:var(--text-secondary)}@media (max-width: 1400px){.main-content{grid-template-columns:1fr;grid-template-rows:auto auto auto}.options-panel{width:100%}.input-panel,.output-panel{min-width:unset}}</style>
</head>
<body>
  <!-- Toast Container -->
  <div class="toast-container position-fixed top-0 end-0 p-3"></div>

  <div class="container-fluid p-0">
    <div id="app">
      <!-- Header -->
      <header class="app-header">
        <h1><i class="fas fa-tools"></i> Developer Workbench</h1>
        <p class="subtitle">Format, Transform & Validate Code</p>
      </header>

      <!-- Main Content -->
      <div class="main-content">
        <!-- Input Panel -->
        <div class="panel input-panel" id="inputPanel">
          <div class="panel-header">
            <div class="header-actions">
              <label for="fileInput" class="btn btn-sm btn-outline-primary">
                <i class="fas fa-folder-open"></i> Open File
              </label>
              <input type="file" id="fileInput" hidden accept=".json,.xml,.html,.htm,.csv,.tsv,.txt,.yaml,.yml,.sql">
              <button id="clearInputBtn" class="btn btn-sm btn-outline-danger">
                <i class="fas fa-times"></i> Clear
              </button>
            </div>
            <h3><i class="fas fa-file-import"></i> Input</h3>
            <div class="header-actions">
              <button id="collapseInputBtn" class="btn btn-sm btn-outline-secondary" title="Collapse Input Panel">
                <i class="fas fa-chevron-left"></i>
              </button>
            </div>
          </div>

          <!-- Drop Zone -->
          <div id="dropZone" class="drop-zone">
            <i class="fas fa-cloud-upload-alt"></i>
            <p>Drag & drop files here</p>
            <small>or paste content below</small>
          </div>

          <!-- Input Textarea -->
          <textarea id="inputArea" class="code-area" placeholder="Paste your code here or drop a file above..."></textarea>

          <!-- Format Detection -->
          <div class="format-info">
            <label>Detected Format:</label>
            <select id="formatSelector" class="form-select">
              <option value="auto" selected>Auto-detect</option>
              <option value="json">JSON</option>
              <option value="xml">XML</option>
              <option value="html">HTML</option>
              <option value="css">CSS</option>
              <option value="javascript">JavaScript</option>
              <option value="markdown">Markdown/Text Converter</option>
              <option value="hierarchical">Hierarchical Lists</option>
              <option value="sort">Sort Text</option>
              <option value="csv">CSV</option>
              <option value="tsv">TSV (Tab-Delimited)</option>
              <option value="yaml">YAML</option>
              <option value="sql">SQL</option>
              <option value="text">Plain Text</option>
            </select>
          </div>
        </div>

        <!-- Options Panel -->
        <div class="options-panel">
          <div class="panel-header">
            <h3><i class="fas fa-cog"></i> Options</h3>
            <button id="expandBothBtn" class="btn btn-sm btn-outline-secondary" style="display: none;" title="Expand Both Panels">
              <i class="fas fa-expand-arrows-alt"></i>
            </button>
          </div>

          <div class="options-content">
            <!-- Common Options -->
            <div class="option-group">
              <label for="indentSize">Indent Size:</label>
              <select id="indentSize" class="form-select form-select-sm">
                <option value="2" selected>2 spaces</option>
                <option value="4">4 spaces</option>
                <option value="tab">Tab</option>
              </select>
            </div>

            <!-- JSON Options -->
            <div id="jsonOptions" class="option-group" style="display: none;">
              <label>JSON Output:</label>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="jsonFormat" id="jsonPrettify" value="prettify" checked>
                <label class="form-check-label" for="jsonPrettify">Prettify</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="jsonFormat" id="jsonMinify" value="minify">
                <label class="form-check-label" for="jsonMinify">Minify (Single Line)</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="jsonToTable">
                <label class="form-check-label" for="jsonToTable">Convert to Table (if flat)</label>
              </div>
            </div>

            <!-- XML Options -->
            <div id="xmlOptions" class="option-group" style="display: none;">
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="xmlSelfClosing" checked>
                <label class="form-check-label" for="xmlSelfClosing">Self-closing tags</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="xmlToTable">
                <label class="form-check-label" for="xmlToTable">Convert to Table (if flat)</label>
              </div>
            </div>

            <!-- CSS Options -->
            <div id="cssOptions" class="option-group" style="display: none;">
              <label>CSS Output:</label>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="cssFormat" id="cssPrettify" value="prettify" checked>
                <label class="form-check-label" for="cssPrettify">Prettify</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="cssFormat" id="cssSingleLine" value="singleline">
                <label class="form-check-label" for="cssSingleLine">Single Line Per Rule (Sorted)</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="cssFormat" id="cssMinify" value="minify">
                <label class="form-check-label" for="cssMinify">Minify</label>
              </div>
              <div class="form-check mt-2">
                <input class="form-check-input" type="checkbox" id="cssShowDuplicates">
                <label class="form-check-label" for="cssShowDuplicates">Show Duplicates Only</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="cssMergeDuplicates">
                <label class="form-check-label" for="cssMergeDuplicates">Merge & Deduplicate</label>
              </div>
            </div>

            <!-- JavaScript Options -->
            <div id="jsOptions" class="option-group" style="display: none;">
              <label>JavaScript Output:</label>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="jsFormat" id="jsPrettify" value="prettify" checked>
                <label class="form-check-label" for="jsPrettify">Prettify</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="jsFormat" id="jsMinify" value="minify">
                <label class="form-check-label" for="jsMinify">Minify (Single Line)</label>
              </div>
            </div>

            <!-- Markdown Options -->
            <div id="markdownOptions" class="option-group" style="display: none;">
              <label>Convert To:</label>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="markdownFormat" id="mdToMarkdown" value="markdown" checked>
                <label class="form-check-label" for="mdToMarkdown">Markdown</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="markdownFormat" id="mdToHtml" value="html">
                <label class="form-check-label" for="mdToHtml">HTML</label>
              </div>
            </div>

            <!-- Sort Options -->
            <div id="sortOptions" class="option-group" style="display: none;">
              <label>Sort Order:</label>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="sortOrder" id="sortAZ" value="asc" checked>
                <label class="form-check-label" for="sortAZ">A-Z (Ascending)</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="sortOrder" id="sortZA" value="desc">
                <label class="form-check-label" for="sortZA">Z-A (Descending)</label>
              </div>
              <div class="form-check mt-2">
                <input class="form-check-input" type="checkbox" id="sortIgnoreCase" checked>
                <label class="form-check-label" for="sortIgnoreCase">Ignore Case</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="sortRemoveDuplicates">
                <label class="form-check-label" for="sortRemoveDuplicates">Remove Duplicates</label>
              </div>
            </div>

            <!-- Hierarchical List Options -->
            <div id="hierarchicalOptions" class="option-group" style="display: none;">
              <label>Output Format:</label>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="hierarchicalFormat" id="hierText" value="text" checked>
                <label class="form-check-label" for="hierText">Indented Text</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="hierarchicalFormat" id="hierMarkdown" value="markdown">
                <label class="form-check-label" for="hierMarkdown">Markdown</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="hierarchicalFormat" id="hierHTML" value="html">
                <label class="form-check-label" for="hierHTML">HTML</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="hierarchicalFormat" id="hierJSON" value="json">
                <label class="form-check-label" for="hierJSON">JSON</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="hierarchicalFormat" id="hierXML" value="xml">
                <label class="form-check-label" for="hierXML">XML</label>
              </div>
              <div class="form-check mt-2">
                <input class="form-check-input" type="checkbox" id="hierSmartParse" checked>
                <label class="form-check-label" for="hierSmartParse">Smart Parse (brainstorming notes)</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="hierMerge">
                <label class="form-check-label" for="hierMerge">Merge Multiple Lists</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="hierShowDuplicates">
                <label class="form-check-label" for="hierShowDuplicates">Show Duplicates Analysis</label>
              </div>
            </div>

            <!-- CSV Options -->
            <div id="csvOptions" class="option-group" style="display: none;">
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="csvToJson">
                <label class="form-check-label" for="csvToJson">Convert to JSON</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="csvToTable" checked>
                <label class="form-check-label" for="csvToTable">Show as Table</label>
              </div>
            </div>

            <!-- Settings -->
            <div class="option-group">
              <label for="maxFileSize">Max File Size (MB):</label>
              <input type="number" id="maxFileSize" class="form-control form-control-sm" value="10" min="1" max="100">
            </div>

            <!-- Format Button -->
            <button id="formatBtn" class="btn btn-primary w-100 mt-3">
              <i class="fas fa-magic"></i> Format
            </button>
          </div>
        </div>

        <!-- Output Panel -->
        <div class="panel output-panel" id="outputPanel">
          <div class="panel-header">
            <div class="header-actions">
              <button id="collapseOutputBtn" class="btn btn-sm btn-outline-secondary" title="Collapse Output Panel">
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>
            <h3><i class="fas fa-file-export"></i> Output</h3>
            <div class="header-actions">
              <button id="copyBtn" class="btn btn-sm btn-outline-success" disabled>
                <i class="fas fa-copy"></i> Copy
              </button>
              <button id="downloadBtn" class="btn btn-sm btn-outline-info" disabled>
                <i class="fas fa-download"></i> Download
              </button>
            </div>
          </div>

          <!-- Tabs -->
          <ul class="nav nav-tabs" id="outputTabs" role="tablist">
            <li class="nav-item" role="presentation">
              <button class="nav-link active" id="formatted-tab" data-bs-toggle="tab" data-bs-target="#formatted" type="button" role="tab">
                Formatted
              </button>
            </li>
            <li class="nav-item" role="presentation" style="display: none;">
              <button class="nav-link" id="table-tab" data-bs-toggle="tab" data-bs-target="#table" type="button" role="tab">
                Table View
              </button>
            </li>
          </ul>

          <!-- Tab Content -->
          <div class="tab-content" id="outputTabContent">
            <!-- Formatted Output -->
            <div class="tab-pane fade show active" id="formatted" role="tabpanel">
              <pre id="outputArea" class="code-area"><code id="outputCode"></code></pre>
            </div>
            <!-- Table Output -->
            <div class="tab-pane fade" id="table" role="tabpanel">
              <div class="table-actions mb-2">
                <button id="export-json-btn" class="btn btn-sm btn-outline-primary" disabled>
                  <i class="fas fa-file-code"></i> Export as JSON
                </button>
                <button id="export-xml-btn" class="btn btn-sm btn-outline-primary" disabled>
                  <i class="fas fa-file-code"></i> Export as XML
                </button>
                <button id="export-csv-btn" class="btn btn-sm btn-outline-primary" disabled>
                  <i class="fas fa-file-csv"></i> Export as CSV
                </button>
              </div>
              <div id="tableOutput" class="table-container"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Footer Stats -->
      <div class="footer-stats">
        <span id="statsInfo">Ready</span>
      </div>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>